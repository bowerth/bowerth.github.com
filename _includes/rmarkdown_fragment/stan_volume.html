<div id="general" class="section level2">
<h2>General</h2>
<p>Chain-linking is obtained by multiplying each annual link as an index by the chain accumulated up until the previous year. The chain obtained using this method is obviously an index number. Therefore, its conversion to monetary terms is performed by multiplying it by the value at current prices for a specific year, called “reference year”.</p>
<p><strong>Source:</strong> <a href="http://www.ine.es/en/daco/daco42/cne00/medic_vol_encad_b2000_en.pdf">INE</a></p>
<p>See also: <a href="http://ec.europa.eu/eurostat/cache/metadata/EN/ei_qna_esms.htm#unit_measure1421916244135" class="uri">http://ec.europa.eu/eurostat/cache/metadata/EN/ei_qna_esms.htm#unit_measure1421916244135</a></p>
<dl>
<dt>Fisher index</dt>
<dd>geometric average, combination of Paasche and Laspeyres
</dd>
</dl>
</div>
<div id="objective" class="section level2">
<h2>Objective</h2>
<p>Calculate previous year price <code>VKPY</code> and chained volume <code>VALK</code> series from current prices <code>VALU</code> and chained index <code>VKOT</code> series</p>
</div>
<div id="data-examples" class="section level2">
<h2>Data Examples</h2>
<div id="chained-laspeyres-example-sweden" class="section level3">
<h3>Chained Laspeyres example: Sweden</h3>
<ul>
<li>data source: SWE Eurostat, Total Economy Value-added (at basic prices)</li>
<li>reference year 2010 (for comparison with original data)</li>
</ul>
<pre class="r"><code>data_xts &lt;- df2xts(data_df = data_csv_init)
dygraph_vignette(data = data_xts, main = &quot;Initial Data&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-5678" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-5678">{"x":{"attrs":{"title":"Initial Data","ylabel":"Million SEK","labels":["year","VALU","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z","2012-01-01T00:00:00Z","2013-01-01T00:00:00Z"],[116951,122165,133813,153184,180055,197248,213226,228796,246315,264344,271973,267733,257924,266056,310787,375062,373830,398587,424910,442989,483474,479057,482920,491802,512055,525680,562244,597176,570497,499889,575259,588552,559308,null],[null,34.3,34.2,36.2,39.6,40.8,41.1,42,43.3,43.4,42.7,41,39.4,39.6,45.9,52.2,53.9,58.6,63.8,68.8,75.5,74.8,78.2,81.7,89.2,92.7,100.2,104.4,101.3,81.4,100,104.9,97.3,null]]},"evals":[]}</script></p>
<pre class="r"><code>data_csv_valk &lt;- data_csv_init
data_csv_valk$VALK &lt;-
  stan::cpIdxCl(
    data = data_csv_valk,
    var.cp = &quot;VALU&quot;,
    var.idx = &quot;VKOT&quot;,
    id.vars = &quot;ind&quot;,
    refyear = 2010
)
data_xts &lt;- df2xts(data_df = data_csv_valk)
dygraph_vignette(data = data_xts, main = &quot;Intermediate Data (including VALK)&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-5803" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-5803">{"x":{"attrs":{"title":"Intermediate Data (including VALK)","ylabel":"Million SEK","labels":["year","VALU","VALK","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z","2012-01-01T00:00:00Z","2013-01-01T00:00:00Z"],[116951,122165,133813,153184,180055,197248,213226,228796,246315,264344,271973,267733,257924,266056,310787,375062,373830,398587,424910,442989,483474,479057,482920,491802,512055,525680,562244,597176,570497,499889,575259,588552,559308,null],[null,197313.837,196738.578,208243.758,227802.564,234705.672,236431.449,241608.78,249087.147,249662.406,245635.593,235856.19,226652.046,227802.564,264043.881,300285.198,310064.601,337101.774,367015.242,395778.192,434320.545,430293.732,449852.538,469986.603,513131.028,533265.093,576409.518,600570.396,582737.367,468260.826,575259,603446.691,559727.007,null],[null,34.3,34.2,36.2,39.6,40.8,41.1,42,43.3,43.4,42.7,41,39.4,39.6,45.9,52.2,53.9,58.6,63.8,68.8,75.5,74.8,78.2,81.7,89.2,92.7,100.2,104.4,101.3,81.4,100,104.9,97.3,null]]},"evals":[]}</script></p>
<pre class="r"><code>data_csv_vkpy &lt;- data_csv_valk
data_csv_vkpy$VKPY &lt;-
  stan::cpVolPyp(
    data = data_csv_valk,
    var.cp = &quot;VALU&quot;,
    var.cl = &quot;VALK&quot;,
    id.vars = &quot;ind&quot;)
data_xts &lt;- df2xts(data_df = data_csv_vkpy)
dygraph_vignette(data = data_xts, main = &quot;Final Data (including VKPY)&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-1626" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-1626">{"x":{"attrs":{"title":"Final Data (including VKPY)","ylabel":"Million SEK","labels":["year","VALU","VALK","VKPY","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z","2012-01-01T00:00:00Z","2013-01-01T00:00:00Z"],[116951,122165,133813,153184,180055,197248,213226,228796,246315,264344,271973,267733,257924,266056,310787,375062,373830,398587,424910,442989,483474,479057,482920,491802,512055,525680,562244,597176,570497,499889,575259,588552,559308,null],[null,197313.837,196738.578,208243.758,227802.564,234705.672,236431.449,241608.78,249087.147,249662.406,245635.593,235856.19,226652.046,227802.564,264043.881,300285.198,310064.601,337101.774,367015.242,395778.192,434320.545,430293.732,449852.538,469986.603,513131.028,533265.093,576409.518,600570.396,582737.367,468260.826,575259,603446.691,559727.007,null],[null,null,121808.833819242,141638.321637427,167571.447513812,185511.212121212,198698.352941177,217895.182481752,235877.780952381,246883.856812933,260080.387096774,261145.035128806,257284.882926829,259233.258883249,308383.090909091,353444.039215686,387276.662835249,406427.421150278,433956.494880546,458210.156739812,486128.917151163,478991.459602649,500832.318181818,504534.066496164,536949.062423501,532146.844170403,568210.74433657,585811.113772455,579443.762452107,458425.032576505,614114.250614251,603446.691,545911.435653003,null],[null,34.3,34.2,36.2,39.6,40.8,41.1,42,43.3,43.4,42.7,41,39.4,39.6,45.9,52.2,53.9,58.6,63.8,68.8,75.5,74.8,78.2,81.7,89.2,92.7,100.2,104.4,101.3,81.4,100,104.9,97.3,null]]},"evals":[]}</script></p>
<pre class="r"><code>## data_xts &lt;- df2xts(data_df = subset(data_csv, select = names(data_csv_vkpy)))
data_xts &lt;- df2xts(data_df = data_csv)
dygraph_vignette(data = data_xts, main = &quot;Original Data (for comparison)&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-678" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-678">{"x":{"attrs":{"title":"Original Data (for comparison)","ylabel":"Million SEK","labels":["year","cou","EUNAMA10R2_VALK","EUNAMA10R2_VALU","EUNAMA10R2_VKOT","EUNAMA10R2_VKPY","VALU","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z","2012-01-01T00:00:00Z","2013-01-01T00:00:00Z"],["SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE","SWE"],[null,null,null,null,null,null,null,null,null,null,null,null,null,"227655","263940","300071","310335","337361","366826","396031","434223","430484","450039","470156","513206","532987","576422","600359","582828","468437","575259","603579","559797","555229"],[null,null,null,null,null,null,null,null,null,null,null,null,null,"266056","310787","375062","373830","398587","424910","442989","483474","479057","482920","491802","512055","525680","562244","597176","570497","499889","575259","588552","559308","549567"],[null,null,null,null,null,null,null,null,null,null,null,null,null," 39.6"," 45.9"," 52.2"," 53.9"," 58.6"," 63.8"," 68.8"," 75.5"," 74.8"," 78.2"," 81.7"," 89.2"," 92.7","100.2","104.4","101.3"," 81.4","100.0","104.9"," 97.3"," 96.5"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,"308462","353331","387891","406386","433399","458739","485710","479311","500818","504507","536834","531792","568519","585592","579738","458526","613883","603579","545860","554744"],["116951","122165","133813","153184","180055","197248","213226","228796","246315","264344","271973","267733","257924","266056","310787","375062","373830","398587","424910","442989","483474","479057","482920","491802","512055","525680","562244","597176","570497","499889","575259","588552","559308",null],[null," 34.3"," 34.2"," 36.2"," 39.6"," 40.8"," 41.1"," 42.0"," 43.3"," 43.4"," 42.7"," 41.0"," 39.4"," 39.6"," 45.9"," 52.2"," 53.9"," 58.6"," 63.8"," 68.8"," 75.5"," 74.8"," 78.2"," 81.7"," 89.2"," 92.7","100.2","104.4","101.3"," 81.4","100.0","104.9"," 97.3",null]]},"evals":[]}</script></p>
</div>
<div id="chained-fisher-example-usa" class="section level3">
<h3>Chained Fisher example: USA</h3>
<ul>
<li>data source: USA BEA, Total Economy Value-added (at market prices incl. VAT)</li>
<li>reference year 2005 (for comparison with original data)</li>
</ul>
<pre class="r"><code>data_xts &lt;- df2xts(data_df = data_csv_init)
dygraph_vignette(data = data_xts, main = &quot;Initial Data&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-8958" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-8958">{"x":{"attrs":{"title":"Initial Data","ylabel":"Billion USD","labels":["year","VALU","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1971-01-01T00:00:00Z","1972-01-01T00:00:00Z","1973-01-01T00:00:00Z","1974-01-01T00:00:00Z","1975-01-01T00:00:00Z","1976-01-01T00:00:00Z","1977-01-01T00:00:00Z","1978-01-01T00:00:00Z","1979-01-01T00:00:00Z","1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z"],[1126.817,1237.885,1382.269,1499.452,1637.7,1824.583,2030.13,2293.762,2562.228,2788.143,3126.837,3253.194,3534.606,3930.895,4217.47,4460.067,4736.354,5100.422,5482.146,5800.527,5992.094,6342.306,6667.35,7085.16,7414.655,7838.456,8332.362,8793.495,9353.484,9951.482,10286.167,10642.316,11142.212,11853.254,12622.959,13377.215,14028.675,14291.543,13973.681,14498.922,15075.667],[0.34932,0.36788,0.3892,0.38705,0.38623,0.40695,0.42566,0.4494,0.46345,0.46217,0.4739,0.4647,0.4857,0.5206,0.54214,0.56092,0.57887,0.60266,0.6242,0.63591,0.63442,0.65595,0.67466,0.70214,0.7198,0.74672,0.78,0.81397,0.85326,0.88857,0.89816,0.91445,0.93769,0.97021,1,1.02658,1.04622,1.0427,1.01069,1.03486,1.05356]]},"evals":[]}</script></p>
<pre class="r"><code>data_csv_valk &lt;- data_csv_init
data_csv_valk$VALK &lt;-
  stan::cpIdxCl(
    data = data_csv_valk,
    var.cp = &quot;VALU&quot;,
    var.idx = &quot;VKOT&quot;,
    id.vars = &quot;ind&quot;,
    refyear = 2005
)
data_xts &lt;- df2xts(data_df = data_csv_valk)
dygraph_vignette(data = data_xts, main = &quot;Intermediate Data (including VALK)&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-7629" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-7629">{"x":{"attrs":{"title":"Intermediate Data (including VALK)","ylabel":"Billion USD","labels":["year","VALU","VALK","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1971-01-01T00:00:00Z","1972-01-01T00:00:00Z","1973-01-01T00:00:00Z","1974-01-01T00:00:00Z","1975-01-01T00:00:00Z","1976-01-01T00:00:00Z","1977-01-01T00:00:00Z","1978-01-01T00:00:00Z","1979-01-01T00:00:00Z","1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z"],[1126.817,1237.885,1382.269,1499.452,1637.7,1824.583,2030.13,2293.762,2562.228,2788.143,3126.837,3253.194,3534.606,3930.895,4217.47,4460.067,4736.354,5100.422,5482.146,5800.527,5992.094,6342.306,6667.35,7085.16,7414.655,7838.456,8332.362,8793.495,9353.484,9951.482,10286.167,10642.316,11142.212,11853.254,12622.959,13377.215,14028.675,14291.543,13973.681,14498.922,15075.667],[4409.45203788,4643.73415692,4912.8556428,4885.71628095,4875.36545457,5136.91316505,5373.08872794,5672.7577746,5850.11034855,5833.95296103,5982.0202701,5865.8890473,6130.9711863,6571.5124554,6843.41099226,7080.47016228,7307.05227633,7607.35247094,7879.2510078,8027.06585769,8008.25764878,8280.02995605,8516.20551894001,8863.08443226001,9086.00588820001,9425.81594448001,9845.90802,10274.70993723,10770.66599634,11216.38267863,11337.43685544,11543.06485755,11836.42242471,12246.92105139,12622.959,12958.47725022,13206.39216498,13161.9593493,12757.89843171,13062.99535074,13299.04468404],[0.34932,0.36788,0.3892,0.38705,0.38623,0.40695,0.42566,0.4494,0.46345,0.46217,0.4739,0.4647,0.4857,0.5206,0.54214,0.56092,0.57887,0.60266,0.6242,0.63591,0.63442,0.65595,0.67466,0.70214,0.7198,0.74672,0.78,0.81397,0.85326,0.88857,0.89816,0.91445,0.93769,0.97021,1,1.02658,1.04622,1.0427,1.01069,1.03486,1.05356]]},"evals":[]}</script></p>
<pre class="r"><code>data_csv_vkpy &lt;- data_csv_valk
data_csv_vkpy$VKPY &lt;-
  stan::cpVolPyp(
    data = data_csv_valk,
    var.cp = &quot;VALU&quot;,
    var.cl = &quot;VALK&quot;,
    id.vars = &quot;ind&quot;)
data_xts &lt;- df2xts(data_df = data_csv_vkpy)
dygraph_vignette(data = data_xts, main = &quot;Final Data (including VKPY)&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-8659" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-8659">{"x":{"attrs":{"title":"Final Data (including VKPY)","ylabel":"Billion USD","labels":["year","VALU","VALK","VKPY","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1971-01-01T00:00:00Z","1972-01-01T00:00:00Z","1973-01-01T00:00:00Z","1974-01-01T00:00:00Z","1975-01-01T00:00:00Z","1976-01-01T00:00:00Z","1977-01-01T00:00:00Z","1978-01-01T00:00:00Z","1979-01-01T00:00:00Z","1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z"],[1126.817,1237.885,1382.269,1499.452,1637.7,1824.583,2030.13,2293.762,2562.228,2788.143,3126.837,3253.194,3534.606,3930.895,4217.47,4460.067,4736.354,5100.422,5482.146,5800.527,5992.094,6342.306,6667.35,7085.16,7414.655,7838.456,8332.362,8793.495,9353.484,9951.482,10286.167,10642.316,11142.212,11853.254,12622.959,13377.215,14028.675,14291.543,13973.681,14498.922,15075.667],[4409.45203788,4643.73415692,4912.8556428,4885.71628095,4875.36545457,5136.91316505,5373.08872794,5672.7577746,5850.11034855,5833.95296103,5982.0202701,5865.8890473,6130.9711863,6571.5124554,6843.41099226,7080.47016228,7307.05227633,7607.35247094,7879.2510078,8027.06585769,8008.25764878,8280.02995605,8516.20551894001,8863.08443226001,9086.00588820001,9425.81594448001,9845.90802,10274.70993723,10770.66599634,11216.38267863,11337.43685544,11543.06485755,11836.42242471,12246.92105139,12622.959,12958.47725022,13206.39216498,13161.9593493,12757.89843171,13062.99535074,13299.04468404],[null,1186.68681426772,1309.62499184517,1374.63313579137,1496.27527699264,1725.55734924786,1908.47032750952,2143.35484189259,2365.47396283934,2555.15139661236,2858.9068258433,3066.13453028065,3400.20728599096,3788.58530697962,4093.53710199769,4363.56526432287,4602.79359675177,4931.00540991933,5282.71896658149,5584.9911292214,5786.93579176299,6195.44475158412,6523.21086357192,6938.92201849821,7263.36367106275,7691.95774048347,8187.80222841225,8695.24704761538,9217.95341806209,9740.55420139231,10058.8845821038,10472.7280363744,10912.7817705069,11528.6347348484,12217.2045227322,12958.47725022,13633.1409897913,13981.4756193726,13852.8048284933,14307.8525756266,14760.9186385791],[0.34932,0.36788,0.3892,0.38705,0.38623,0.40695,0.42566,0.4494,0.46345,0.46217,0.4739,0.4647,0.4857,0.5206,0.54214,0.56092,0.57887,0.60266,0.6242,0.63591,0.63442,0.65595,0.67466,0.70214,0.7198,0.74672,0.78,0.81397,0.85326,0.88857,0.89816,0.91445,0.93769,0.97021,1,1.02658,1.04622,1.0427,1.01069,1.03486,1.05356]]},"evals":[]}</script></p>
<pre class="r"><code>data_xts &lt;- df2xts(data_df = subset(data_csv, select = names(data_csv_vkpy)))
dygraph_vignette(data = data_xts, main = &quot;Original Data (for comparison)&quot;, ylab = y_lab) %&gt;%
  dySeries(&quot;VKOT&quot;, axis = &#39;y2&#39;)</code></pre>
<p><div id="htmlwidget-9056" style="width:672px;height:432px;" class="dygraphs"></div>
<script type="application/json" data-for="htmlwidget-9056">{"x":{"attrs":{"title":"Original Data (for comparison)","ylabel":"Billion USD","labels":["year","VALU","VALK","VKPY","VKOT"],"retainDateWindow":false,"axes":{"x":{"pixelsPerLabel":50}},"legend":"onmouseover","labelsDivWidth":550,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"series":{"VKOT":{"axis":"y2"}}},"scale":"yearly","annotations":[],"shadings":[],"events":[],"data":[["1971-01-01T00:00:00Z","1972-01-01T00:00:00Z","1973-01-01T00:00:00Z","1974-01-01T00:00:00Z","1975-01-01T00:00:00Z","1976-01-01T00:00:00Z","1977-01-01T00:00:00Z","1978-01-01T00:00:00Z","1979-01-01T00:00:00Z","1980-01-01T00:00:00Z","1981-01-01T00:00:00Z","1982-01-01T00:00:00Z","1983-01-01T00:00:00Z","1984-01-01T00:00:00Z","1985-01-01T00:00:00Z","1986-01-01T00:00:00Z","1987-01-01T00:00:00Z","1988-01-01T00:00:00Z","1989-01-01T00:00:00Z","1990-01-01T00:00:00Z","1991-01-01T00:00:00Z","1992-01-01T00:00:00Z","1993-01-01T00:00:00Z","1994-01-01T00:00:00Z","1995-01-01T00:00:00Z","1996-01-01T00:00:00Z","1997-01-01T00:00:00Z","1998-01-01T00:00:00Z","1999-01-01T00:00:00Z","2000-01-01T00:00:00Z","2001-01-01T00:00:00Z","2002-01-01T00:00:00Z","2003-01-01T00:00:00Z","2004-01-01T00:00:00Z","2005-01-01T00:00:00Z","2006-01-01T00:00:00Z","2007-01-01T00:00:00Z","2008-01-01T00:00:00Z","2009-01-01T00:00:00Z","2010-01-01T00:00:00Z","2011-01-01T00:00:00Z"],[1126.817,1237.885,1382.269,1499.452,1637.7,1824.583,2030.13,2293.762,2562.228,2788.143,3126.837,3253.194,3534.606,3930.895,4217.47,4460.067,4736.354,5100.422,5482.146,5800.527,5992.094,6342.306,6667.35,7085.16,7414.655,7838.456,8332.362,8793.495,9353.484,9951.482,10286.167,10642.316,11142.212,11853.254,12622.959,13377.215,14028.675,14291.543,13973.681,14498.922,15075.667],[null,null,null,null,null,null,5373.0887,5672.7578,5850.1103,5833.953,5982.0203,5865.889,6130.9712,6571.5125,6843.411,7080.4702,7307.0523,7607.3525,7879.251,8027.0659,8008.2576,8280.03,8516.2055,8863.0844,9086.0059,9425.8159,9845.908,10274.71,10770.666,11216.383,11337.437,11543.065,11836.422,12246.921,12622.959,12958.477,13206.392,13161.959,12757.898,13062.995,13299.045],[null,null,null,null,null,null,null,2143.3548,2365.474,2555.1514,2858.9068,3066.1345,3400.2073,3788.5853,4093.5371,4363.5653,4602.7936,4931.0054,5282.719,5584.9911,5786.9358,6195.4448,6523.2109,6938.922,7263.3637,7691.9577,8187.8022,8695.247,9217.9534,9740.5542,10058.885,10472.728,10912.782,11528.635,12217.205,12958.477,13633.141,13981.476,13852.805,14307.853,14760.919],[0.34932,0.36788,0.3892,0.38705,0.38623,0.40695,0.42566,0.4494,0.46345,0.46217,0.4739,0.4647,0.4857,0.5206,0.54214,0.56092,0.57887,0.60266,0.6242,0.63591,0.63442,0.65595,0.67466,0.70214,0.7198,0.74672,0.78,0.81397,0.85326,0.88857,0.89816,0.91445,0.93769,0.97021,1,1.02658,1.04622,1.0427,1.01069,1.03486,1.05356]]},"evals":[]}</script></p>
</div>
</div>
